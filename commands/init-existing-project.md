# 现有项目初始化

## 概述

此command用于为现有代码项目建立完整的Claude Code支持环境，包括MCP服务器配置、项目分析、文档生成和日志记录。

## 1 工作流

### 前置条件
- 确保在项目根目录执行此command
- 确保有足够的权限读取和修改项目文件
- 确保网络连接正常（用于MCP服务器配置）

### 详细步骤

#### 步骤 1: MCP服务器初始化
- 执行 `/init-mcp` command
- 根据项目需求选择合适的MCP服务器
- 推荐默认包含：`sequential-thinking`、`serena`、`context7`

#### 步骤 2: 项目结构分析
- 调用 `Codebase Analyzer` 递归读取项目目录结构
- 生成详细的项目文件清单和依赖关系
- 识别主要的技术栈和框架

#### 步骤 3: 项目上下文建立
- 调用 `Memorizer` 将分析结果写入各级 `CLAUDE.md`
- 在项目根目录创建主 `CLAUDE.md` 文件
- 在重要子目录创建相应的 `CLAUDE.md` 文件

#### 步骤 4: 代码注释和技术文档
- 调用 `Code Explainer` 为主要代码文件添加详细注释
- 向各级 `CLAUDE.md` 中追加技术文档
- 确保注释符合项目编码规范

#### 步骤 5: 项目文档同步
- 调用 `Document Manager` 创建或更新 `README.md`
- 基于 `LOG.md` 的内容同步项目进展信息
- 建立项目的基本文档结构

#### 步骤 6: 初始化日志记录
- 调用 `Log Recorder` 记录完整的初始化过程
- 生成详细的工作日志，包含所有步骤的执行结果

## 2 错误处理

### 常见问题及解决方案

#### MCP服务器配置失败
- **症状**: 无法连接到MCP服务器或配置文件创建失败
- **解决方案**:
  - 检查网络连接
  - 验证MCP服务器地址和凭证
  - 手动创建 `.mcp.json` 文件

#### 项目分析失败
- **症状**: Codebase Analyzer 无法读取某些文件或目录
- **解决方案**:
  - 检查文件权限
  - 排除不必要的目录（如 `node_modules`, `.git`）
  - 重新执行分析步骤

#### 内存不足
- **症状**: 处理大型项目时出现性能问题
- **解决方案**:
  - 分批处理文件
  - 优先分析核心代码文件
  - 增加系统资源限制

## 3 验证清单

初始化完成后，请验证以下内容：

### 文件结构检查
- [ ] 项目根目录存在 `CLAUDE.md` 文件
- [ ] 重要子目录存在对应的 `CLAUDE.md` 文件
- [ ] 项目根目录存在 `README.md` 文件
- [ ] 项目根目录存在 `LOG.md` 文件
- [ ] 项目根目录存在 `.mcp.json` 文件

### 内容完整性检查
- [ ] `CLAUDE.md` 包含完整的项目结构信息
- [ ] `CLAUDE.md` 包含主要代码文件的技术文档
- [ ] `README.md` 包含项目基本介绍和结构说明
- [ ] `LOG.md` 记录了初始化过程的所有步骤

### 功能性检查
- [ ] 可以正常调用子代理进行代码分析
- [ ] 可以正常使用MCP服务器功能
- [ ] 可以正常进行项目文档更新

## 4 最佳实践

### 大型项目处理
- 对于超过1000个文件的项目，建议分阶段进行初始化
- 优先处理核心业务代码，后处理工具和测试代码
- 考虑使用 `.gitignore` 规则排除不必要的文件

### 持续维护
- 定期更新 `CLAUDE.md` 文件以反映项目变化
- 保持 `LOG.md` 的持续记录
- 定期检查和更新MCP服务器配置

## 5 后续操作

初始化完成后，您可以：

1. **开始项目开发**: 使用子代理系统进行代码开发和维护
2. **文档维护**: 使用 Document Manager 保持项目文档的最新状态
3. **代码分析**: 使用 Codebase Analyzer 进行定期的项目结构分析
4. **团队协作**: 与团队成员分享初始化后的项目环境

---

**注意**: 此command应该只在项目首次引入Claude Code时执行一次。后续的项目维护请使用相应的专门commands。